---
title: 'DirectX vs Vulkan 그리고 텍스처 압축'
parmalink : /study/2025-06-16
date: 2025-06-16
tags:
  - Optimization
  - Com2us TA Campus
---

> 하드웨어마다 다른데, 무엇을 보고 결정할 수 있을까?

![image-20250616022404420](./../images/2025-06-16-%ED%94%8C%EB%9E%AB%ED%8F%BC/image-20250616022404420.png)

레드 데드 리뎀션 2 PC 게임처럼 현대 게임들은 플레이어가 직접 그래픽 API를 선택할 수 있는 옵션을 제공한다. 각 API마다 장단점이 분명하고, 하드웨어/운영체제에 따라 실제 게임 체감도도 많이 달라진다. (실제로, 유저글에서 Vulkan으로 바꿨을때 프레임 증가가 있었다는 경험도 있음)

하지만 반대로 "DirectX 12가 더 안정적이다"는 의견도 많다. 이런 차이가 발생하는 이유가 뭘까?

&nbsp;

# 그래픽 API

**API(Application Programming Interface)는 게임이든, 앱이든 2D/3D 프로그램을 만들 때 CPU와 GPU, 메모리 등 하드웨어 자원을 연결해주는 일종의 다리** 역할을 한다. 개발자 입장에선 복잡한 하드웨어 코드를 직접 짤 필요 없이, 표준화된 명령으로 그래픽·메모리·입출력 처리를 할 수 있게 해 준다.

DLSS(딥러닝 슈퍼 샘플링), 레이트레이싱 같은 첨단 기술을 설명할때 한번쯤 들어 봤을 것이다.

&nbsp;

## 그래픽 API 양대 산맥

- **❎DirectX 12**

  - 마이크로소프트에서 만든 API.
  - 윈도우와 XBOX 플랫폼에 최적화되어 있고, 하드웨어(특히 멀티코어 CPU) 자원에 저수준(Direct)으로 접근할 수 있다.
  - 멀티스레드, DXR(실시간 레이트레이싱) 등 최신 기술을 두루 지원

  > DirectX의 핵심 개발자 Alex St John은 인터뷰에서 "DirectX라고 불리는 이유는 운영체제를 우회하고, Windows를 밀어내고, 메모리에서 제거하고, 게임과 리소스를 두고 경쟁하는 모든 필요없는 데이터를 없애고, 그냥 게임이 실행되도록 하기 위해 설계되었기 때문"이라고 밝혔다. 즉, 처음부터 **게임 성능 최우선**으로 만들어진 API다.
  > <a hraf="https://www.shacknews.com/article/46338/alex-st-john-interview">Alex St John Interview 참고</a>

- **🌋Vulkan**
  - Khronos Group에서 관리하는 차세대 크로스플랫폼 API.
  - 저수준 접근, 멀티코어 프로세서 최적화, GPU 직접 제어 등 DirectX12와 비슷한 철학.
  - 윈도우/리눅스/안드로이드 등 다양한 플랫폼 지원.

| 레이트레이싱(RT) 지원                                        |
| ------------------------------------------------------------ |
| 세 API 모두 레이트레이싱을 지원할 수 있지만, 가장 강력하게 지원되는 건 DirectX 12(DXR)다. 언리얼, 유니티 같은 최신 엔진에선 DX12의 RT 기능을 바로 쓸 수 있다. Vulkan은 확장 형태로 지원하고, OpenGL은 네이티브 RT 지원이 없다. |

| DLSS                                                         |
| ------------------------------------------------------------ |
| DLSS는 Nvidia가 제공하는 AI 슈퍼 샘플링 기술이다.<br />DLSS를 쓰려면, API 차원에서 모션 벡터 등 특수 데이터 전달이 가능해야 한다. Vulkan은 Proton(리눅스)등에서 적극 지원하며, 최신 게임에선 DOOM Eternal, No Man's Sky 등에서 Vulkan+DLSS 조합으로 높은 프레임을 기록했다. |

&nbsp;

&nbsp;

### DirectX 12와 Vulkan 중 어떤 것이 좋을까? (PC 플랫폼 기준)

Vulkan은 하드웨어를 더 효율적으로 활용하는것으로 유명하다. (전체적으로 부하가 한 쪽에 치우치지 않고 고르게 분배되는 편) 하지만, Vulkan은 더 낮은 레벨의 API이기 때문에 개발이 어렵고 복잡하다는 의견도 많다. 반대로 DirectX는 윈도우 전용 API이긴 하지만, API가 상대적으로 간단해서 개발자 입장에선 빠르게 개발하기 편하다. 

그래서 평균적으로 DirectX는 윈도우와 Xbox에서, Vulkan은 윈도우, 리눅스, 안드로이드, 스위치 등에서 사용된다. (여러 운영체제에서 동작한다는 이점을 갖고 있음)

&nbsp;

위 이미지는 앞서 말한 Red Dead Redemption 2 게임의 **DirectX 12 vs Vulkan**을 비교한 이미지다.

![red dead redemption 2 game directx 11 vs vulkan performance FPS comparison on PC](./../images/2025-06-16-%ED%94%8C%EB%9E%AB%ED%8F%BC/Red-Dead-Redemption-2-directx-12-vs-vulkan.jpg)

<a href="https://beebom.com/directx-vs-vulkan/">이미지 출처 : DirectX vs Vulkan: Performance Cmoparison</a>

Vulkan이 최소 FPS가 더 높고 전반적으로 안정적인 모습이다. DirectX 12의 최대 FPS는 Vulkan보다 높지만 최소 FPS가 적어 순간적인 프레임 드랍이 느껴질 수 있다. Red Dead Redemption 2 외에도 <a hraf="DirectX vs Vulkan: Performance Cmoparison">DirectX vs Vulkan: Performance Cmoparison</a>의 내용을 참고하면, Path of Exile 게임의 API 선택 옵션 DirectX 11 vs DirectX 12 vs Vulkan 비교에서도 Vulkan이 가장 좋은 결과를 보여주었다. 

하지만 이는 Intel i5 CPU, RTX 4050 PC를 기준으로 테스트 한 사양이기 때문에 유저 각자의 하드웨어에 따라 다르게 나타날 수 있다. 실제로 많은 게임에서 이런 선택 옵션을 제공하는 이유도, 하드웨어 환경마다 체감되는 성능이 다르기 때문이다.

&nbsp;

# 텍스처 압축

GPU가 처음 등장했을 때부터 개발자들은 더 좋은, 더 큰 텍스처를 메모리에 집어넣기 위해 온갖 방법을 시도해 왔다. RAM을 늘리는 것보다는, 결국 **압축 텍스처 포맷**을 활용하는 게 효율적이었다. 

텍스처 압축의 핵심은 **데이터 크기를 줄이면서, 시각적인 품질 손실을 최소화**하는 것이다.특히 모바일 디바이스 시대가 오면서 이 문제는 더욱 중요해졌다. 모바일은 CPU와 메모리를 공유하기 때문에 RAM은 더욱 부족하고, 저장공간도 한정적이라 데이터 전송량과 파일 크기를 줄이는 게 중요하다.

&nbsp;

&nbsp;

## 주요 압축 포맷

![img](./../images/2025-06-16-%ED%94%8C%EB%9E%AB%ED%8F%BC/chartpic-all-annot.png)

<a href="https://aras-p.info/blog/2020/12/08/Texture-Compression-in-2020/">출처 : Texture Compression in **2020**</a>

위 이미지는 다양한 텍스처 압축 포맷과 인코더들의 **압축 품질(PSNR, y축)**과 **압축 처리 속도(Mpix/s, x축)**를 비교한 그래프입니다. 세로축의 PSNR은 압축후의 이미지 품질을 뜻하고 가로축의 Mpix/s는 초당 몇 메가픽셀(Mpix)을 압축 할 수 있는지, 압축의 처리 속도를 의미합니다. (오른쪽 위로 갈수록 '품질도 좋고 속도도 빠른' 이상적인 포맷. 왼쪽 아래는 '속도도 느리고 품질도 별로'인 포맷)

최고 품질이 필요하다면 BC7또는 ASTC 4x4를, 용량이나 속도를 최우선한다면 ASTC 8x8 또는 Fast ETC2를 고려할 수 있다. 이 그래프는 압축 포맷이나 압축 툴을 선택할 때 품질과 속도 모두를 종합적으로 고려해야 한다는 것을 보여주고 있다. 어떤 포맷이 그래프 상 어느 위치에 있는지 파악하면 더 효율적으로 포맷을 결정할 수 있을 것이다. (위 그래프는 플랫폼 별 특이성 고려는 되지 않았음)

&nbsp;

#### S3TC/DXT/BCn (데스크탑)

- 4x4 블록, 4bpp, 고정된 용량·품질
  - **bpp : 1픽셀 당 비트 수, 낮을수록 더 압축**
- 알파를 넣으려면 별도 블록 필요.
- 오랜 역사가 있는 데스크탑 표준 포맷. 대부분의 PC게임에서 사용

#### PVRTC/PVRTC2 (iOS 계열)

- iPhone, iPad같은 PowerVR GPU에서 주로 사용.
- 4bpp/2bpp 여러 압축 단계가 있음.
  - (2bpp로 갈수록 품질이 많이 떨어질 수 있음)

#### ETC/ETC2 (OpenGL ES 계열)

- 4bpp, 8bpp(알파)
- 다양한 하드웨어(특히 안드로이드 폰)에서 지원
- ETC2는 OpenGL ES 3.0 표준 포맷, 알파·SRGB·R/RG등 다양한 채널 지원
- 툴이 느리다는 점이 단점

#### **ASTC (현재 표준)**

- 4x4부터 12x12까지 다양한 블록 크기를 제공.
- RGB, RG, R, RGBA 등 거의 모든 텍스처 유형 지원.
- 각 블록마다 최적의 압축법을 알아서 적용. (이전 포맷 대비 품질이 압도적으로 좋음)
- 하드웨어 보급률이 높아, 모바일/PC에서 모두 필수 포맷으로 자리잡는 중.

&nbsp;

![img](./../images/2025-06-16-%ED%94%8C%EB%9E%AB%ED%8F%BC/image001.png)

<a hraf="https://developer.nvidia.com/astc-texture-compression-for-game-assets">이미지 출처 : Using ASTC Texture Compression for Game Assets</a>

| Codec        | bpp      | 용량(기준 대비) | 품질(IQ) | 비고                                 |
| :----------- | :------- | :-------------- | :------- | :----------------------------------- |
| ASTC 4x4     | 8        | 1.00            | 2        | 미세한 아티팩트 외엔 매우 좋음       |
| EAC_RG11     | 8        | 1.00            | 2        | 미세한 노이즈, 나머지는 매우 좋음    |
| ASTC 4x5     | 6.4      | 0.80            | 1        | 약간의 아티팩트, 그래도 쓸만함       |
| **BC3n**     | **8**    | **1.00**        | **0**    | **블러/노이즈, 경계선 AA 일부 손실** |
| PVRTC2_4     | 4        | 0.50            | 0        | 일부 블러/노이즈, 거의 쓸만한 한계   |
| **ASTC 5x5** | **5.12** | **0.64**        | **0**    | **블록 아티팩트 일부, 한계점**       |
| ASTC 8x5     | 3.2      | 0.40            | -1       | 블록/밴딩 현상                       |
| ASTC 6x6     | 3.56     | 0.45            | -2       | 블록/밴딩 심화                       |
| BC1n         | 4        | 0.50            | -2       | AA 손실, 블록 아티팩트               |

- **IQ**: 2는 거의 원본, 0이면 딱 쓸만한 정도의 한계, -2는 눈에 띄게 품질 저하.
- **bpp**: 낮을수록 용량이 적지만, 품질도 그만큼 희생.

위 이미지는 각 텍스처 포맷이 실제 노말맵에 어떤 품질 차이를 만드는지를 보여준다. 쪽은 압축 전(원본) 이미지이고, 가운데는 많이 쓰이는 BC3n(DXT5nm, 8bpp) 포맷, 오른쪽은 최신 ASTC 5x5(5.12bpp) 포맷으로 압축된 결과다. 이미지만 봐도, ASTC 5x5가 더 적은 용량으로도 블러나 경계선의 손실이 훨씬 적고, 원본에 가까운 느낌을 준다.

표를 보면 각 포맷마다 bpp, 품질(IQ), 그리고 실제 시각적으로 보이는 특징(아티팩트, 경계선 손실 등)이 정리되어 있다. 

예를 들어, ASTC 4x4는 거의 원본에 가까운 품질을 제공하면서도 효율적이고 ASTC 5x5는 품질을 살리면서 용량을 크게 줄일 수 있는 최대 마지노선 역할을 한다. 반면, BC3n은 블러·노이즈가 발생하고 경계선 AA(안티앨리어싱)도 일부 손실되는 문제가 있다. 그보다 더 낮은 bpp 포맷들은 BC3n보다도 눈에 띄게 품질이 나빠진다.

&nbsp;&nbsp;

&nbsp;&nbsp;

| PNG, JPEG의 이미지 압축과의 차이점                           |
| ------------------------------------------------------------ |
| 위에서 설명한 하드웨어 압축(DXT, ASTC)와 일반 압축(PNG나 JPEG 같은)이랑 뭐가 다를까?<br/><br/>PNG나 JPEG같은 일반 압축은<br/>1. 그림 책 전체를 한줄로 쭉 묶어서 전체를 한번에 꼼꼼하게 압축한다.<br/>2. 만약 책 10쪽 중 7쪽 그림 한장이 보고 싶어도 1쪽부터 차근차근 압축을 풀면서 7쪽까지 찾아야 한다.<br/><br/>**▶ 즉, 중간 한 페이지만 딱! 볼 수 없다는 것.**<br/><br/><br/>하지만, 하드웨어 텍스처 압축(DXT, ASTC)는<br/>1. 그림 책을 여러 조각의 퍼즐로 나누어 1쪽씩 네모난 블록 단위로 잘라서 조각마다 압축을 한다.<br/>2. 그러면 100조각중 27번 퍼즐 조각이 궁금하다고 했을때, 27번 조각을 바로 꺼내 볼 수 있다.<br/><br/>**▶ 즉, 보고 싶은 부분만 바로 찾아서 꺼낼 수 있다. 이것을 랜덤 액세스(Random Access)가 쉽다고 표현한다.**<br/><br/>게임에서는 화면의 어느 부분이든 즉시 접근할 수 있어야 한다. 플레이어가 갑자기 고개를 돌리면 전혀 다른 텍스처가 필요하다. 이때 전체 이미지를 처음부터 해제할 수는 없으니, **블록 단위로 필요한 부분만 즉시 가져올 수 있는** 하드웨어 압축이 필수다. <br/>- DXT(BCn): 텍스처를 4x4 픽셀 블록으로 쪼갠 뒤, 각 블록을 64/128비트로 압축<br/>- ASTC: 4x4~12x12 등 다양한 크기의 블록 모두 128비트로 압축 |

&nbsp;

결론적으로, 텍스처 압축 포맷을 선택할 때는 그래픽 API와 마찬가지로 '가장 좋은' 하나의 답이 있는게 아니라, 내가 만들고자 하는 프로젝트의 플랫폼, 실제로 눈에 보이는 결과물의 품질까지 고려해야 한다. 예를들어, 용량과 메모리 효율이 매우 중요한 모바일 게임에서는 약간의 품질 저하를 감수하더라도 더 크게 압축할 수 있는 포맷을 사용해야하고 반대로, 콘솔이나 PC처럼 고해상도의 큰 화면을 지원해야 하는 경우엔 압축 효율도 중요하지만 품질도 대단히 중요하다.

실제로, 개발을 하다보면 한 포맷으로 정해서 쭉 가기보다는 중요한 리소스는 고품질 압축을 적용하고, 덜 중요한 배경이나 반복 텍스처에는 고압축/저품질 포맷을 섞어 쓰는 식으로 타협을 한다. 결국 우리는 목표에 맞는 최적의 타협점을 찾아 좋은 퀄리티의 그래픽을 뒷받침하는 좋은 성능의 게임을 만들어 플레이어에게 최고의 경험을 선사하는 것이 목표라는 점을 잊지 말아야 한다.

&nbsp;

&nbsp;

----

참고

<a href="https://alain.xyz/blog/comparison-of-modern-graphics-apis#command-buffer">A DirectX 12 vs OpenGL vs Vulkan - Find the best APIs for your hardware</a>

<a href="https://computergraphics.stackexchange.com/questions/1523/how-does-hardware-texture-compression-work">How douse hardware texture compression work?</a>

&nbsp;

&nbsp;