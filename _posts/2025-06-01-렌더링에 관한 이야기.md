---
title: '렌더링에 관한 이야기'
parmalink : /study/2025-06-01-1
date: 2025-06-01
tags:
  - Optimigation	
  - Com2us TA Campus
---


> 아티스트의 파이프라인 탐험기

![Untitled (1)](./../images/2025-06-01-%EB%A0%8C%EB%8D%94%EB%A7%81%EC%97%90%20%EA%B4%80%ED%95%9C%20%EC%9D%B4%EC%95%BC%EA%B8%B0/Untitled%20(1).webp)

- CPU에서 하는 컬링 : 오브젝트 단위로 컬링
- GPU에서 하는 컬링 : 삼각형 단위로 컬링

> 렌더독 뜯어보기?

뷰 프러스텀(View Frustum)은 3D 그래픽스에서 카메라가 실제로 볼 수 있는 공간을 의미합니다. 절두체(절단된 피라미드) 모양으로, 카메라의 시야각(FOV)과 near/far 평면으로 정의됩니다.

이 공간 밖의 객체들은 뷰 프러스텀 컬링을 통해 렌더링에서 제외되며, 이는 성능 최적화에 중요한 역할을 합니다. 컨텍스트에서 언급된 것처럼, 이러한 컬링은 CPU 레벨에서 오브젝트 단위로, 그리고 GPU 레벨에서는 더 세밀하게 삼각형 단위로수행됩니다.

------

가드밴드(Guard Band)는 그래픽스 파이프라인에서 클리핑 최적화를 위해 사용되는 기술입니다. 뷰 프러스텀 주변에 추가적인 여유 공간(밴드)을 두어, 화면 바깥으로 약간 벗어난 객체들을 즉시 클리핑하지 않고 처리할 수 있게 합니다.

이는 클리핑 연산의 오버헤드를 줄이는데 도움이 되며, 특히 객체가 화면 경계를 자주 넘나드는 경우에 성능 향상에 기여합니다.

------

퍼스펙티브 디비전(Perspective Division)은 3D 그래픽스 파이프라인에서 원근 투영을 구현하기 위한 핵심 단계입니다. 이는 3D 좌표를 2D 스크린 좌표로 변환하는 과정에서 발생합니다.

이 과정에서 정점의 x, y, z 좌표를 w 컴포넌트로 나누는데, 이를 통해:

- 멀리 있는 물체는 더 작게 보이고
- 가까이 있는 물체는 더 크게 보이는

원근감 효과가 만들어집니다. 이는 실제 우리 눈이 세상을 보는 방식과 유사한 시각적 효과를 제공합니다.

이 과정은 투영 행렬 변환 이후, 래스터화 이전에 수행되며, 3D 그래픽스에서 현실감 있는 장면을 만드는데 필수적인 단계입니다.

------

> 레스터화에 대한 이야기 이미지 레스터화의 종류, 활용, 어떤게 무겁고 어떤게 가벼운지

------

요즘 해상도가 계속 올라가고 있어서 픽셀셰이더 비용이 폭발적으로 증가함.

------

Early Z-S(Early Z/Stencil) 테스트는 GPU 렌더링 파이프라인에서 수행되는 최적화 기술입니다. 이 테스트는 픽셀 셰이더를 실행하기 전에 수행되며, 다음과 같은 특징이 있습니다:

- 깊이(Z) 및 스텐실 테스트를 픽셀 셰이더 실행 전에 수행하여 불필요한 픽셀 셰이딩을 방지
- 이미 그려진 물체에 의해 가려질 픽셀들을 조기에 걸러냄으로써 성능 향상
- 특히 복잡한 픽셀 셰이더를 사용하는 경우 큰 성능 이점을 제공

이는 앞서 언급된 픽셀 셰이더 비용 증가 문제를 완화하는데 도움이 되는 중요한 최적화 기술입니다.



블룸 패스(패스가 아님)는 왜 나뉘는가?

------

Multiple Render Target(MRT)은 그래픽스 파이프라인에서 한 번의 렌더 패스로 여러 개의 렌더 타겟(텍스처)에 동시에 출력할 수 있는 기술입니다.

- 하나의 픽셀 셰이더 실행으로 여러 출력값을 각각 다른 렌더 타겟에 기록
- 디퍼드 렌더링에서 G-버퍼를 생성할 때 주로 활용됨

예를 들어, 하나의 패스에서:

- 알베도(색상) 정보를 첫 번째 렌더 타겟에
- 노말 정보를 두 번째 렌더 타겟에
- 깊이/포지션 정보를 세 번째 렌더 타겟에

동시에 저장할 수 있어 렌더링 성능을 크게 향상시킬 수 있습니다.

------

<aside> 💡

메가 라이트

</aside>

------

Translucency(반투명)와 Transparency(투명)는 그래픽스에서 다음과 같은 차이점이 있습니다:

### Transparency (투명)

- 빛이 완전히 통과하여 뒤의 물체가 그대로 보임
- 유리창이나 깨끗한 물과 같은 효과
- 렌더링 순서가 매우 중요함 (뒤에서 앞으로 그려야 함)

### Translucency (반투명)

- 빛이 부분적으로 통과하고 산란됨
- 반투명 플라스틱, 젖빛 유리, 연기와 같은 효과
- 더 복잡한 렌더링 처리가 필요함
- 주변 조명과의 상호작용을 고려해야 함

게임 엔진에서는 이 두 가지를 다르게 처리하며, 특히 Translucency는 더 많은 연산 비용이 필요하고 올바른 결과를 위해 더 복잡한 셰이더 처리가 요구됩니다.

------

Vertex Fogging For Opaque는 언리얼 엔진의 렌더링 옵션 중 하나로, 불투명(Opaque) 오브젝트에 대한 안개 효과를 처리하는 방식을 결정합니다:

- 버텍스 레벨에서 안개 계산을 수행하여 픽셀 셰이더의 부하를 줄임
- 성능 최적화에 도움이 되지만, 픽셀 단위의 정밀한 안개 표현은 어려움
- 주로 멀리 있는 오브젝트나 디테일이 덜 중요한 부분에 사용

이 옵션은 특히 대규모 야외 환경에서 성능과 시각적 품질 사이의 균형을 맞추는데 유용합니다.

> 언리얼은 기본적으로 디퍼드 렌더링 패스를 사용함.

------

> 언리얼에서 모바일로 빌드를 하면 디퍼드→포워드로 자동 변환됨. 유니티 포워드+ : 제대로 안돌아~ 쓰면 안된다.

그냥 보면 디퍼드가 되게 좋아보이는데, 왜 안쓸까?

> 

디퍼드 렌더링이 포워드 렌더링보다 무거운 주요 이유들:

- 메모리 사용량이 높음: G-버퍼에 여러 렌더 타겟을 저장해야 하므로 많은 메모리가 필요
- 대역폭 부하: G-버퍼의 데이터를 읽고 쓰는 과정에서 메모리 대역폭을 많이 사용
- 반투명 처리의 어려움: 반투명 오브젝트는 별도의 포워드 패스가 필요해 파이프라인이 복잡해짐
- MSAA 적용의 어려움: G-버퍼 전체에 대해 MSAA를 적용해야 해서 메모리와 연산 부하가 큼

이러한 이유들로 인해 특히 모바일 환경이나 메모리/대역폭이 제한된 환경에서는 포워드 렌더링이 선호됩니다.

<aside> 💡

유니티에서 directional light를 끄고 키고 차이없이 Rendering deberger에서 오브젝트당 라이트 갯수가 1로 고정되는 이슈?

G버퍼와 C버퍼의 차이

</aside>



&nbsp;
